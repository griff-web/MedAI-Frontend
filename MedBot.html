<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MedAI</title>
<link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdQRHGEmi5WbR1z9s2efKq33kxiId0ir2_dg&s">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
:root{
--ke-black:#000;
--ke-red:#922529;
--ke-green:#008C51;
--ke-white:#fff;
}

body{
margin:0;
font-family:Inter,Arial;
background:#f4f4f4;
}

.nav-bar{
background:var(--ke-black);
color:white;
padding:15px 25px;
display:flex;
align-items:center;
justify-content:space-between;
border-bottom:4px solid var(--ke-red);
}

.nav-left{
display:flex;
align-items:center;
gap:15px;
}

.back-btn{
color:white;
font-size:22px;
cursor:pointer;
text-decoration:none;
}

.btn-pdf{
background:var(--ke-green);
color:white;
border:none;
padding:8px 16px;
font-weight:600;
cursor:pointer;
border-radius:4px;
}

#content-to-print{
max-width:900px;
margin:auto;
padding-bottom:160px;
}

.messages{
padding:25px;
display:flex;
flex-direction:column;
gap:20px;
}

.message{
display:flex;
gap:12px;
max-width:85%;
}

.user-message{
align-self:flex-end;
flex-direction:row-reverse;
}

.avatar{
width:42px;
height:42px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-weight:bold;
color:white;
}

.ai-avatar{background:var(--ke-red);}
.user-avatar{background:var(--ke-black);}

.message-bubble{
background:white;
padding:15px 18px;
border-radius:12px;
line-height:1.6;
box-shadow:0 4px 6px rgba(0,0,0,0.05);
}

.user-message .message-bubble{
background:var(--ke-black);
color:white;
}

.input-container{
position:fixed;
bottom:0;
left:0;
right:0;
background:white;
padding:20px;
border-top:2px solid var(--ke-red);
}

.input-area{
max-width:800px;
margin:auto;
display:flex;
background:#eee;
border-radius:30px;
padding:5px 10px 5px 20px;
}

input{
flex:1;
border:none;
background:transparent;
font-size:16px;
outline:none;
}

.send-btn{
background:var(--ke-red);
border:none;
color:white;
width:40px;
height:40px;
border-radius:50%;
cursor:pointer;
}

.typing{
margin-left:80px;
font-weight:bold;
color:var(--ke-green);
display:none;
}
</style>
</head>

<body>

<div class="nav-bar">
<div class="nav-left">
<a href="dash.html" class="back-btn">‚Üê</a>
<b> MEDAI </b>
</div>
<button class="btn-pdf" id="download-pdf">SAVE REPORT</button>
</div>

<div id="content-to-print">
<div class="messages" id="chat-box">
<div class="message ai-message">
<div class="avatar ai-avatar">üõ°Ô∏è</div>
<div class="message-bubble">
Jambo! I am <b>MedAI</b>, a health decision-support assistant.<br><br>
Describe your symptoms and I will guide you safely.
</div>
</div>
</div>
<div class="typing" id="typing">Analyzing health data‚Ä¶</div>
</div>

<div class="input-container">
<div class="input-area">
<input id="user-input" placeholder="Describe your symptoms...">
<button class="send-btn" id="send">‚ûî</button>
</div>
</div>

<script>
const chatBox=document.getElementById("chat-box");
const typing=document.getElementById("typing");
const input=document.getElementById("user-input");

const knowledgeBase=[
{keys:["fever","chills"], text:"Possible infection. Rest, hydrate, and monitor temperature."},
{keys:["headache","migraine"], text:"May be tension or dehydration. Rest and drink fluids."},
{keys:["cough","sore throat"], text:"Upper respiratory irritation. Warm fluids recommended."},
{keys:["chest pain","breathing"], text:"‚ö†Ô∏è This may be serious. Seek immediate medical attention."},
{keys:["stomach pain","diarrhea"], text:"Possible gastrointestinal issue. Oral rehydration advised."},
{keys:["dizziness","fainting"], text:"May relate to low blood pressure or dehydration."},
{keys:["rash","itching"], text:"Possible allergic reaction or skin condition."},
{keys:["joint pain","swelling"], text:"May be inflammatory or injury-related."}
];

let conversationHistory=[];

function addMessage(text,isUser){
const div=document.createElement("div");
div.className=`message ${isUser?"user-message":"ai-message"}`;
div.innerHTML=`<div class="avatar ${isUser?"user-avatar":"ai-avatar"}">${isUser?"üë§":"üõ°Ô∏è"}</div>
<div class="message-bubble">${text}</div>`;
chatBox.appendChild(div);
window.scrollTo(0,document.body.scrollHeight);
conversationHistory.push({role:isUser?"User":"MedAI",text});
}

function analyze(inputText){
const text=inputText.toLowerCase();
for(let item of knowledgeBase){
if(item.keys.some(k=>text.includes(k))){
return `<b>Assessment:</b> ${item.text}<br><br>
<b>Disclaimer:</b> This is educational information only. Consult a healthcare professional.`;
}
}
return `<b>General Guidance:</b> Symptoms are unclear.<br>
Monitor your condition and seek medical advice if concerned.<br><br>
<b>Disclaimer:</b> Not a diagnosis.`;
}

function handleChat(){
if(!input.value.trim())return;
const userText=input.value;
input.value="";
addMessage(userText,true);
typing.style.display="block";
setTimeout(()=>{
typing.style.display="none";
addMessage(analyze(userText),false);
},800);
}

document.getElementById("send").onclick=handleChat;
input.addEventListener("keypress",e=>{if(e.key==="Enter")handleChat();});

document.getElementById("download-pdf").onclick=()=>{
html2pdf().from(document.getElementById("content-to-print"))
.set({margin:10,filename:"MedAI_Health_Report.pdf"})
.save();
};
</script>

</body>
</html>
