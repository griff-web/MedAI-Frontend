<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MedAI Assistant</title>
<link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdQRHGEmi5WbR1z9s2efKq33kxiId0ir2_dg&s">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
:root{
--ke-black:#000;
--ke-red:#922529;
--ke-green:#008C51;
--ke-white:#fff;
}

body{
margin:0;
font-family:Inter,Arial;
background:#f4f4f4;
}

.nav-bar{
background:var(--ke-black);
color:white;
padding:15px 25px;
display:flex;
align-items:center;
justify-content:space-between;
border-bottom:4px solid var(--ke-red);
}

.nav-left{
display:flex;
align-items:center;
gap:15px;
}

.back-btn{
color:white;
font-size:22px;
cursor:pointer;
text-decoration:none;
}

.btn-pdf{
background:var(--ke-green);
color:white;
border:none;
padding:8px 16px;
font-weight:600;
cursor:pointer;
border-radius:4px;
}

#content-to-print{
max-width:900px;
margin:auto;
padding-bottom:160px;
}

.messages{
padding:25px;
display:flex;
flex-direction:column;
gap:20px;
}

.message{
display:flex;
gap:12px;
max-width:85%;
}

.user-message{
align-self:flex-end;
flex-direction:row-reverse;
}

.avatar{
width:42px;
height:42px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-weight:bold;
color:white;
}

.ai-avatar{background:var(--ke-red);}
.user-avatar{background:var(--ke-black);}

.message-bubble{
background:white;
padding:15px 18px;
border-radius:12px;
line-height:1.6;
box-shadow:0 4px 6px rgba(0,0,0,0.05);
}

.user-message .message-bubble{
background:var(--ke-black);
color:white;
}

.input-container{
position:fixed;
bottom:0;
left:0;
right:0;
background:white;
padding:20px;
border-top:2px solid var(--ke-red);
}

.input-area{
max-width:800px;
margin:auto;
display:flex;
background:#eee;
border-radius:30px;
padding:5px 10px 5px 20px;
}

input{
flex:1;
border:none;
background:transparent;
font-size:16px;
outline:none;
}

.send-btn{
background:var(--ke-red);
border:none;
color:white;
width:40px;
height:40px;
border-radius:50%;
cursor:pointer;
}

.typing{
margin-left:80px;
font-weight:bold;
color:var(--ke-green);
display:none;
}
</style>
</head>

<body>

<div class="nav-bar">
<div class="nav-left">
<a href="dash.html" class="back-btn">‚Üê</a>
<b> MEDAI </b>
</div>
<button class="btn-pdf" id="download-pdf">SAVE REPORT</button>
</div>

<div id="content-to-print">
<div class="messages" id="chat-box">
<div class="message ai-message">
<div class="avatar ai-avatar">üõ°Ô∏è</div>
<div class="message-bubble">
Jambo! I am <b>MedAI</b>, a health decision-support assistant.<br><br>
Describe your symptoms and I will guide you safely.
</div>
</div>
</div>
<div class="typing" id="typing">Analyzing health data‚Ä¶</div>
</div>

<div class="input-container">
<div class="input-area">
<input id="user-input" placeholder="Describe your symptoms...">
<button class="send-btn" id="send">‚ûî</button>
</div>
</div>
<script>
const chatBox = document.getElementById("chat-box");
const typing = document.getElementById("typing");
const input = document.getElementById("user-input");

let lastTopic = null;

/* ================= GREETINGS ================= */
const greetings = ["hi","hello","hey","jambo","good morning","good afternoon","good evening"];

/* ================= MEDICAL KNOWLEDGE BASE (50 CONDITIONS) ================= */
const conditions = [
{topic:"fever", keys:["fever","hot","chills"], response:`
Thank you for sharing that. Fever is usually the body's response to infection.

To guide you better, may I ask:
‚Ä¢ How long have you had the fever?
‚Ä¢ Is it associated with headache, chills, or body aches?

<b>General advice:</b> Rest, hydrate well, and monitor temperature.
<b>Important:</b> Seek medical care if fever lasts more than 2‚Äì3 days.
`},

{topic:"headache", keys:["headache","migraine"], response:`
I understand. Headaches can have many causes including stress, dehydration, or infection.

May I ask:
‚Ä¢ Is the pain mild or severe?
‚Ä¢ Is it on one side or the whole head?
‚Ä¢ Any nausea or vision problems?

Seek care if the headache is sudden, severe, or persistent.
`},

{topic:"cough", keys:["cough","sore throat"], response:`
Thank you. A cough with sore throat often relates to respiratory irritation or infection.

To clarify:
‚Ä¢ Is the cough dry or productive?
‚Ä¢ Any fever or chest pain?

Warm fluids and rest may help. Seek care if breathing becomes difficult.
`},

{topic:"chest", keys:["chest pain","breathing","shortness"], response:`
‚ö†Ô∏è I am concerned about these symptoms.

Chest pain or difficulty breathing may be serious.
Please seek immediate medical attention or visit the nearest hospital.
`},

{topic:"stomach", keys:["stomach pain","abdominal"], response:`
Abdominal pain can arise from digestion issues, infection, or inflammation.

To help further:
‚Ä¢ Where exactly is the pain?
‚Ä¢ Is it constant or cramping?
‚Ä¢ Any vomiting or diarrhea?

Seek care if pain is severe or worsening.
`},

{topic:"diarrhea", keys:["diarrhea","loose stool"], response:`
Diarrhea is commonly caused by infection or contaminated food/water.

Please tell me:
‚Ä¢ How many times per day?
‚Ä¢ Any blood or fever?

Oral rehydration is important. Seek care if dehydration occurs.
`},

{topic:"vomiting", keys:["vomiting","nausea"], response:`
Nausea and vomiting may indicate stomach irritation or infection.

I‚Äôd like to know:
‚Ä¢ How long has this been happening?
‚Ä¢ Are you able to keep fluids down?

Persistent vomiting requires medical attention.
`},

{topic:"dizziness", keys:["dizzy","dizziness","faint"], response:`
Dizziness may be due to dehydration, low blood pressure, or fatigue.

Please clarify:
‚Ä¢ Does it happen when standing?
‚Ä¢ Any loss of consciousness?

Seek care if fainting occurs.
`},

{topic:"rash", keys:["rash","itching","skin"], response:`
Skin rashes may be allergic, infectious, or inflammatory.

May I ask:
‚Ä¢ Where is the rash located?
‚Ä¢ Is it painful or itchy?

Seek care if rash spreads rapidly or is painful.
`},

{topic:"joint", keys:["joint pain","swelling","arthritis"], response:`
Joint pain can result from strain, inflammation, or infection.

To understand better:
‚Ä¢ Which joint is affected?
‚Ä¢ Any swelling or redness?

Seek care if pain persists or worsens.
`},

{topic:"back", keys:["back pain"], response:`
Back pain is often due to muscle strain or posture issues.

Questions:
‚Ä¢ Lower or upper back?
‚Ä¢ Any numbness or weakness?

Seek care if pain is severe or persistent.
`},

{topic:"fatigue", keys:["fatigue","tired","weak"], response:`
Fatigue can occur due to illness, stress, or poor sleep.

To guide you:
‚Ä¢ How long have you felt this way?
‚Ä¢ Any weight loss or fever?

Persistent fatigue should be evaluated.
`},

{topic:"urinary", keys:["urination pain","burning urine"], response:`
Painful urination may indicate a urinary tract infection.

Please share:
‚Ä¢ Any fever or lower abdominal pain?
‚Ä¢ Frequency of urination?

Medical evaluation is recommended.
`},

{topic:"eye", keys:["eye pain","red eye","vision"], response:`
Eye discomfort may result from infection or strain.

Please tell me:
‚Ä¢ Any discharge or vision changes?

Seek care if vision is affected.
`},

{topic:"ear", keys:["ear pain"], response:`
Ear pain may be due to infection or pressure changes.

Seek care if pain worsens or hearing is affected.
`},

{topic:"weight", keys:["weight loss"], response:`
Unintentional weight loss should be medically evaluated.

I recommend consulting a healthcare professional.
`},

{topic:"bp", keys:["high blood pressure","hypertension"], response:`
High blood pressure often has no symptoms but requires monitoring.

Regular medical checkups are important.
`},

{topic:"diabetes", keys:["diabetes","high sugar"], response:`
Diabetes requires long-term medical management.

Follow medical guidance and regular monitoring.
`},

{topic:"asthma", keys:["asthma","wheezing"], response:`
Asthma affects breathing and may cause wheezing.

Seek urgent care if breathing worsens.
`},

{topic:"malaria", keys:["malaria"], response:`
Malaria commonly presents with fever, chills, and body aches.

Testing at a health facility is essential.
`},

/* ---------- ADDITIONAL CONDITIONS ---------- */
{keys:["flu","influenza"],response:"Flu is a viral illness causing fever, cough, and body aches. Rest and hydration are important."},
{keys:["covid"],response:"COVID-19 may cause fever, cough, fatigue, and breathing difficulty. Seek testing if suspected."},
{keys:["anemia"],response:"Anemia may cause fatigue and dizziness. Blood tests are required."},
{keys:["depression"],response:"Persistent sadness or loss of interest should be discussed with a healthcare professional."},
{keys:["anxiety"],response:"Anxiety can cause physical and emotional symptoms. Support and evaluation help."},
{keys:["thyroid"],response:"Thyroid disorders affect metabolism and energy levels."},
{keys:["ulcer"],response:"Stomach ulcers may cause burning pain. Medical evaluation needed."},
{keys:["appendicitis"],response:"Severe right-lower abdominal pain requires urgent care."},
{keys:["pneumonia"],response:"Pneumonia causes cough, fever, and breathing difficulty."},
{keys:["tuberculosis","tb"],response:"TB causes chronic cough, fever, and weight loss. Testing is required."},
{keys:["hepatitis"],response:"Hepatitis affects the liver and may cause jaundice."},
{keys:["kidney"],response:"Kidney issues may cause swelling or urination changes."},
{keys:["stroke"],response:"Sudden weakness or speech difficulty is an emergency."},
{keys:["heart attack"],response:"Chest pain with sweating or nausea is an emergency."},
{keys:["allergy"],response:"Allergies cause itching, sneezing, or rashes."},
{keys:["eczema"],response:"Eczema causes chronic itchy skin."},
{keys:["gastritis"],response:"Gastritis causes stomach discomfort and nausea."},
{keys:["sinusitis"],response:"Sinusitis causes facial pain and congestion."},
{keys:["tonsillitis"],response:"Tonsillitis causes sore throat and fever."},
{keys:["uti"],response:"UTI causes burning urination and frequency."}
];

/* ================= CORE LOGIC ================= */
function addMessage(text,isUser){
const div=document.createElement("div");
div.className=`message ${isUser?"user-message":"ai-message"}`;
div.innerHTML=`<div class="avatar ${isUser?"user-avatar":"ai-avatar"}">${isUser?"üë§":"üõ°Ô∏è"}</div>
<div class="message-bubble">${text}</div>`;
chatBox.appendChild(div);
window.scrollTo(0,document.body.scrollHeight);
}

function doctorResponse(text){
const lower=text.toLowerCase();

if(greetings.some(g=>lower.includes(g))){
return `Hello. I‚Äôm glad you reached out.

I‚Äôm here to listen carefully and provide general medical guidance.
Please tell me what symptoms or concerns you‚Äôre experiencing.`;
}

for(let c of conditions){
if(c.keys && c.keys.some(k=>lower.includes(k))){
lastTopic=c.topic||null;
return c.response;
}
}

if(lastTopic){
return `Thank you for that information.

To understand this better, could you tell me:
‚Ä¢ When did the symptoms start?
‚Ä¢ Are they improving or worsening?

This helps guide safe medical advice.`;
}

return `Thank you for sharing.

Your concern is noted. If symptoms persist, worsen, or worry you, please consult a qualified healthcare professional.

<b>Disclaimer:</b> Educational guidance only.`;
}

function handleChat(){
if(!input.value.trim())return;
const userText=input.value;
input.value="";
addMessage(userText,true);
typing.style.display="block";
setTimeout(()=>{
typing.style.display="none";
addMessage(doctorResponse(userText),false);
},900);
}

document.getElementById("send").onclick=handleChat;
input.addEventListener("keypress",e=>{if(e.key==="Enter")handleChat();});

document.getElementById("download-pdf").onclick=()=>{
html2pdf().from(document.getElementById("content-to-print"))
.set({filename:"MedAI_Doctor_Consultation_Report.pdf",margin:10})
.save();
};
</script>

</body>
</html>
