<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MedAI Assistant</title>
<link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQdQRHGEmi5WbR1z9s2efKq33kxiId0ir2_dg&s">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
:root{
--ke-black:#000;
--ke-red:#922529;
--ke-green:#008C51;
--ke-white:#fff;
}

body{
margin:0;
font-family:Inter,Arial;
background:#f4f4f4;
}

.nav-bar{
background:var(--ke-black);
color:white;
padding:15px 25px;
display:flex;
align-items:center;
justify-content:space-between;
border-bottom:4px solid var(--ke-red);
}

.nav-left{
display:flex;
align-items:center;
gap:15px;
}

.back-btn{
color:white;
font-size:22px;
cursor:pointer;
text-decoration:none;
}

.btn-pdf{
background:var(--ke-green);
color:white;
border:none;
padding:8px 16px;
font-weight:600;
cursor:pointer;
border-radius:4px;
}

#content-to-print{
max-width:900px;
margin:auto;
padding-bottom:160px;
}

.messages{
padding:25px;
display:flex;
flex-direction:column;
gap:20px;
}

.message{
display:flex;
gap:12px;
max-width:85%;
}

.user-message{
align-self:flex-end;
flex-direction:row-reverse;
}

.avatar{
width:42px;
height:42px;
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-weight:bold;
color:white;
}

.ai-avatar{background:var(--ke-red);}
.user-avatar{background:var(--ke-black);}

.message-bubble{
background:white;
padding:15px 18px;
border-radius:12px;
line-height:1.6;
box-shadow:0 4px 6px rgba(0,0,0,0.05);
}

.user-message .message-bubble{
background:var(--ke-black);
color:white;
}

.input-container{
position:fixed;
bottom:0;
left:0;
right:0;
background:white;
padding:20px;
border-top:2px solid var(--ke-red);
}

.input-area{
max-width:800px;
margin:auto;
display:flex;
background:#eee;
border-radius:30px;
padding:5px 10px 5px 20px;
}

input{
flex:1;
border:none;
background:transparent;
font-size:16px;
outline:none;
}

.send-btn{
background:var(--ke-red);
border:none;
color:white;
width:40px;
height:40px;
border-radius:50%;
cursor:pointer;
}

.typing{
margin-left:80px;
font-weight:bold;
color:var(--ke-green);
display:none;
}
</style>
</head>

<body>

<div class="nav-bar">
<div class="nav-left">
<a href="dash.html" class="back-btn">‚Üê</a>
<b> MEDAI </b>
</div>
<button class="btn-pdf" id="download-pdf">SAVE REPORT</button>
</div>

<div id="content-to-print">
<div class="messages" id="chat-box">
<div class="message ai-message">
<div class="avatar ai-avatar">üõ°Ô∏è</div>
<div class="message-bubble">
Jambo! I am <b>MedAI</b>, a health decision-support assistant.<br><br>
Describe your symptoms and I will guide you safely.
</div>
</div>
</div>
<div class="typing" id="typing">Analyzing health data‚Ä¶</div>
</div>

<div class="input-container">
<div class="input-area">
<input id="user-input" placeholder="Describe your symptoms...">
<button class="send-btn" id="send">‚ûî</button>
</div>
</div>

<script>
const chatBox = document.getElementById("chat-box");
const typing = document.getElementById("typing");
const input = document.getElementById("user-input");

let conversationContext = [];

/* ================= GREETINGS ================= */
const greetings = [
  "hi", "hello", "hey", "jambo", "good morning", "good afternoon", "good evening"
];

/* ================= MEDICAL KNOWLEDGE BASE (20 CONDITIONS) ================= */
const medicalKnowledge = [
  {
    keys: ["fever", "chills", "sweating"],
    response: `
Thank you for explaining your symptoms. Fever with chills may be associated with infections such as flu, malaria, or other viral illnesses.

<b>General guidance:</b>
‚Ä¢ Rest and hydrate well  
‚Ä¢ Monitor your temperature  
‚Ä¢ Seek medical care if fever lasts more than 2‚Äì3 days  

<b>Disclaimer:</b> This is not a diagnosis.
`
  },
  {
    keys: ["headache", "migraine"],
    response: `
Headaches can occur due to stress, dehydration, eye strain, or infections.

<b>General guidance:</b>
‚Ä¢ Rest in a quiet place  
‚Ä¢ Drink water  
‚Ä¢ Avoid screens temporarily  

<b>Seek care if:</b> headache is severe, sudden, or persistent.
`
  },
  {
    keys: ["cough", "sore throat"],
    response: `
A cough with sore throat may indicate a respiratory infection or irritation.

<b>General guidance:</b>
‚Ä¢ Warm fluids  
‚Ä¢ Rest your voice  
‚Ä¢ Avoid smoke and dust  

<b>Seek care if:</b> breathing becomes difficult.
`
  },
  {
    keys: ["chest pain", "shortness of breath"],
    response: `
‚ö†Ô∏è Chest pain or difficulty breathing can be serious.

<b>Action required:</b>
Please seek immediate medical attention or visit the nearest hospital.

<b>Disclaimer:</b> This assistant cannot manage emergencies.
`
  },
  {
    keys: ["stomach pain", "abdominal pain"],
    response: `
Abdominal pain may result from indigestion, infection, or other conditions.

<b>General guidance:</b>
‚Ä¢ Light meals  
‚Ä¢ Adequate hydration  

<b>Seek care if:</b> pain is severe, persistent, or worsening.
`
  },
  {
    keys: ["diarrhea"],
    response: `
Diarrhea is often caused by infection or contaminated food or water.

<b>General guidance:</b>
‚Ä¢ Oral rehydration solution (ORS)  
‚Ä¢ Avoid dehydration  

<b>Seek care if:</b> blood is present or dehydration occurs.
`
  },
  {
    keys: ["vomiting", "nausea"],
    response: `
Nausea and vomiting may occur with infections or stomach irritation.

<b>General guidance:</b>
‚Ä¢ Small sips of fluids  
‚Ä¢ Rest  

<b>Seek care if:</b> vomiting persists or worsens.
`
  },
  {
    keys: ["dizziness", "fainting"],
    response: `
Dizziness may be related to dehydration, low blood pressure, or fatigue.

<b>General guidance:</b>
‚Ä¢ Sit or lie down  
‚Ä¢ Hydrate  

<b>Seek care if:</b> fainting occurs.
`
  },
  {
    keys: ["rash", "itching"],
    response: `
Skin rashes can be caused by allergies, infections, or irritation.

<b>General guidance:</b>
‚Ä¢ Avoid scratching  
‚Ä¢ Observe changes  

<b>Seek care if:</b> rash spreads rapidly or is painful.
`
  },
  {
    keys: ["joint pain", "swelling"],
    response: `
Joint pain may result from strain, inflammation, or infection.

<b>General guidance:</b>
‚Ä¢ Rest the joint  
‚Ä¢ Gentle movement  

<b>Seek care if:</b> swelling is severe or persistent.
`
  },
  {
    keys: ["back pain"],
    response: `
Back pain is commonly caused by muscle strain or posture issues.

<b>General guidance:</b>
‚Ä¢ Gentle stretching  
‚Ä¢ Avoid heavy lifting  

<b>Seek care if:</b> pain is severe or long-lasting.
`
  },
  {
    keys: ["fatigue", "tired"],
    response: `
Fatigue can occur due to stress, illness, or poor sleep.

<b>General guidance:</b>
‚Ä¢ Adequate rest  
‚Ä¢ Balanced meals  

<b>Seek care if:</b> fatigue persists.
`
  },
  {
    keys: ["burning urination", "urination pain"],
    response: `
Pain during urination may suggest a urinary tract infection.

<b>General guidance:</b>
‚Ä¢ Increase water intake  

<b>Seek care for:</b> proper medical evaluation.
`
  },
  {
    keys: ["eye pain", "red eyes"],
    response: `
Eye discomfort may result from infection or strain.

<b>General guidance:</b>
‚Ä¢ Avoid touching eyes  
‚Ä¢ Limit screen use  

<b>Seek care if:</b> vision changes occur.
`
  },
  {
    keys: ["ear pain"],
    response: `
Ear pain may be due to infection or pressure changes.

<b>General guidance:</b>
‚Ä¢ Keep ear dry  

<b>Seek care if:</b> pain worsens.
`
  },
  {
    keys: ["weight loss"],
    response: `
Unintentional weight loss may require medical evaluation.

<b>Recommendation:</b>
Consult a healthcare professional.
`
  },
  {
    keys: ["high blood pressure"],
    response: `
High blood pressure often has no symptoms but requires monitoring.

<b>Advice:</b>
‚Ä¢ Regular check-ups  
‚Ä¢ Healthy lifestyle  

<b>Seek care:</b> for proper assessment.
`
  },
  {
    keys: ["diabetes"],
    response: `
Diabetes is a chronic condition requiring medical management.

<b>Advice:</b>
‚Ä¢ Regular monitoring  
‚Ä¢ Follow medical guidance
`
  },
  {
    keys: ["asthma", "wheezing"],
    response: `
Asthma affects breathing and may cause wheezing.

<b>Seek care if:</b> breathing difficulty increases.
`
  },
  {
    keys: ["malaria"],
    response: `
Malaria commonly presents with fever, chills, and body aches.

<b>Action:</b>
Visit a health facility for testing and treatment.
`
  }
];

/* ================= CORE FUNCTIONS ================= */

function addMessage(text, isUser) {
  const div = document.createElement("div");
  div.className = `message ${isUser ? "user-message" : "ai-message"}`;
  div.innerHTML = `
    <div class="avatar ${isUser ? "user-avatar" : "ai-avatar"}">
      ${isUser ? "üë§" : "üõ°Ô∏è"}
    </div>
    <div class="message-bubble">${text}</div>
  `;
  chatBox.appendChild(div);
  window.scrollTo(0, document.body.scrollHeight);
}

function getDoctorStyleResponse(text) {
  const lower = text.toLowerCase();

  if (greetings.some(g => lower.includes(g))) {
    return `
Hello! I‚Äôm glad you reached out.  
I‚Äôm here to provide general health guidance in a calm and professional manner.

How can I assist you today?
`;
  }

  for (let item of medicalKnowledge) {
    if (item.keys.some(k => lower.includes(k))) {
      return item.response;
    }
  }

  return `
Thank you for sharing that information.

At the moment, your symptoms are not specific enough for clear guidance.
Please monitor your condition and consult a qualified healthcare professional if you are concerned.

<b>Disclaimer:</b> This assistant provides educational information only.
`;
}

function handleChat() {
  if (!input.value.trim()) return;

  const userText = input.value;
  input.value = "";
  addMessage(userText, true);
  typing.style.display = "block";

  setTimeout(() => {
    typing.style.display = "none";
    addMessage(getDoctorStyleResponse(userText), false);
  }, 900);
}

/* ================= EVENTS ================= */
document.getElementById("send").onclick = handleChat;
input.addEventListener("keypress", e => {
  if (e.key === "Enter") handleChat();
});

document.getElementById("download-pdf").onclick = () => {
  html2pdf()
    .from(document.getElementById("content-to-print"))
    .set({ filename: "MedAI_Conversation_Report.pdf", margin: 10 })
    .save();
};
</script>
</body>
</html>
